//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include <vector>
#include <iostream>
#include <algorithm>
#include <functional>

#include "UnitFormWiki.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TFormWiki *FormWiki;


//---------------------------------------------------------------------------
__fastcall TFormWiki::TFormWiki(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------
void __fastcall TFormWiki::btnAtualizarClick(TObject *Sender)
{
	//Button1->Style = TCustomButton::bsCommandLink;
	FindWiki();
	btnAtualizar->Enabled = false;
}
//---------------------------------------------------------------------------

void TFormWiki::FindWiki()
{
	TSearchRec fPDF;
	int i = 0;
	if (FindFirst(ExtractFilePath(ParamStr(0)) + "\\pdf\\*.*", faArchive,fPDF) ==0)
	{
		do{
			TButton *btn = new TButton(this);
			btn->Caption = ChangeFileExt(fPDF.Name,"");
			btn->Parent = TabControl1;
			//btn->Style = TCustomButton::bsCommandLink;
			btn->Align = alTop;
			btn->OnClick = btnClickCallBack;
			btn->Tag = i;
			i++;
			//ShowMessage(fPDF.Name);
		} while (FindNext(fPDF) == 0);

	}
   FindClose(fPDF);

}

void __fastcall TFormWiki::btnClickCallBack(TObject *Sender)
{
	ShowMessage("Hello" + IntToStr(dynamic_cast<TButton*>(Sender)->Tag));

}
